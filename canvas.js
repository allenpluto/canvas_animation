$(document).ready(function(){
	var canvas = document.getElementById("body_canvas");
	var canvas_width = canvas.width;
	var canvas_height = canvas.height;
	var ctx = canvas.getContext("2d");
	
	if(canvas && ctx)
	{
		console.log("Canvas Initialized");
	}
	else
	{
		alert("Canvas not supported");
	}	
	
	var spots_init = [[345,105,204,0,0,1],[355,105,204,0,0,1],[365,105,204,0,0,1],[425,105,204,0,0,1],[435,105,204,0,0,1],[445,105,204,0,0,1],[335,115,204,0,0,1],[345,115,204,0,0,1],[355,115,204,0,0,1],[365,115,204,0,0,1],[375,115,204,0,0,1],[415,115,204,0,0,1],[425,115,204,0,0,1],[435,115,204,0,0,1],[445,115,204,0,0,1],[455,115,204,0,0,1],[15,125,0,0,0,1],[25,125,0,0,0,1],[35,125,0,0,0,1],[85,125,0,0,0,1],[95,125,0,0,0,1],[105,125,0,0,0,1],[155,125,0,0,0,1],[165,125,0,0,0,1],[175,125,0,0,0,1],[215,125,0,0,0,1],[225,125,0,0,0,1],[235,125,0,0,0,1],[245,125,0,0,0,1],[255,125,0,0,0,1],[265,125,0,0,0,1],[325,125,204,0,0,1],[335,125,204,0,0,1],[345,125,204,0,0,1],[355,125,204,0,0,1],[365,125,204,0,0,1],[375,125,204,0,0,1],[385,125,204,0,0,1],[405,125,204,0,0,1],[415,125,204,0,0,1],[425,125,204,0,0,1],[435,125,204,0,0,1],[445,125,204,0,0,1],[455,125,204,0,0,1],[465,125,204,0,0,1],[515,125,0,0,0,1],[525,125,0,0,0,1],[535,125,0,0,0,1],[545,125,0,0,0,1],[555,125,0,0,0,1],[565,125,0,0,0,1],[575,125,0,0,0,1],[635,125,0,0,0,1],[645,125,0,0,0,1],[655,125,0,0,0,1],[665,125,0,0,0,1],[725,125,0,0,0,1],[735,125,0,0,0,1],[745,125,0,0,0,1],[755,125,0,0,0,1],[815,125,0,0,0,1],[825,125,0,0,0,1],[835,125,0,0,0,1],[845,125,0,0,0,1],[865,125,0,0,0,1],[875,125,0,0,0,1],[885,125,0,0,0,1],[895,125,0,0,0,1],[905,125,0,0,0,1],[915,125,0,0,0,1],[925,125,0,0,0,1],[935,125,0,0,0,1],[945,125,0,0,0,1],[955,125,0,0,0,1],[1005,125,0,0,0,1],[1015,125,0,0,0,1],[1025,125,0,0,0,1],[1035,125,0,0,0,1],[1095,125,0,0,0,1],[1105,125,0,0,0,1],[1115,125,0,0,0,1],[1125,125,0,0,0,1],[15,135,0,0,0,1],[25,135,0,0,0,1],[35,135,0,0,0,1],[45,135,0,0,0,1],[75,135,0,0,0,1],[85,135,0,0,0,1],[95,135,0,0,0,1],[105,135,0,0,0,1],[115,135,0,0,0,1],[145,135,0,0,0,1],[155,135,0,0,0,1],[165,135,0,0,0,1],[175,135,0,0,0,1],[195,135,0,0,0,1],[205,135,0,0,0,1],[215,135,0,0,0,1],[225,135,0,0,0,1],[235,135,0,0,0,1],[245,135,0,0,0,1],[255,135,0,0,0,1],[265,135,0,0,0,1],[275,135,0,0,0,1],[325,135,204,0,0,1],[335,135,204,0,0,1],[345,135,204,0,0,1],[355,135,204,0,0,1],[365,135,204,0,0,1],[375,135,204,0,0,1],[385,135,204,0,0,1],[395,135,204,0,0,1],[405,135,204,0,0,1],[415,135,204,0,0,1],[425,135,204,0,0,1],[435,135,204,0,0,1],[445,135,204,0,0,1],[455,135,204,0,0,1],[465,135,204,0,0,1],[515,135,0,0,0,1],[525,135,0,0,0,1],[535,135,0,0,0,1],[545,135,0,0,0,1],[555,135,0,0,0,1],[565,135,0,0,0,1],[575,135,0,0,0,1],[585,135,0,0,0,1],[595,135,0,0,0,1],[635,135,0,0,0,1],[645,135,0,0,0,1],[655,135,0,0,0,1],[665,135,0,0,0,1],[705,135,0,0,0,1],[715,135,0,0,0,1],[725,135,0,0,0,1],[735,135,0,0,0,1],[745,135,0,0,0,1],[755,135,0,0,0,1],[765,135,0,0,0,1],[775,135,0,0,0,1],[815,135,0,0,0,1],[825,135,0,0,0,1],[835,135,0,0,0,1],[845,135,0,0,0,1],[865,135,0,0,0,1],[875,135,0,0,0,1],[885,135,0,0,0,1],[895,135,0,0,0,1],[905,135,0,0,0,1],[915,135,0,0,0,1],[925,135,0,0,0,1],[935,135,0,0,0,1],[945,135,0,0,0,1],[955,135,0,0,0,1],[1005,135,0,0,0,1],[1015,135,0,0,0,1],[1025,135,0,0,0,1],[1035,135,0,0,0,1],[1095,135,0,0,0,1],[1105,135,0,0,0,1],[1115,135,0,0,0,1],[1125,135,0,0,0,1],[15,145,0,0,0,1],[25,145,0,0,0,1],[35,145,0,0,0,1],[45,145,0,0,0,1],[75,145,0,0,0,1],[85,145,0,0,0,1],[95,145,0,0,0,1],[105,145,0,0,0,1],[115,145,0,0,0,1],[145,145,0,0,0,1],[155,145,0,0,0,1],[165,145,0,0,0,1],[175,145,0,0,0,1],[195,145,0,0,0,1],[205,145,0,0,0,1],[215,145,0,0,0,1],[225,145,0,0,0,1],[235,145,0,0,0,1],[245,145,0,0,0,1],[255,145,0,0,0,1],[265,145,0,0,0,1],[275,145,0,0,0,1],[285,145,0,0,0,1],[325,145,204,0,0,1],[335,145,204,0,0,1],[345,145,204,0,0,1],[355,145,204,0,0,1],[365,145,204,0,0,1],[375,145,204,0,0,1],[385,145,204,0,0,1],[395,145,204,0,0,1],[405,145,204,0,0,1],[415,145,204,0,0,1],[425,145,204,0,0,1],[435,145,204,0,0,1],[445,145,204,0,0,1],[455,145,204,0,0,1],[465,145,204,0,0,1],[515,145,0,0,0,1],[525,145,0,0,0,1],[535,145,0,0,0,1],[545,145,0,0,0,1],[555,145,0,0,0,1],[565,145,0,0,0,1],[575,145,0,0,0,1],[585,145,0,0,0,1],[595,145,0,0,0,1],[605,145,0,0,0,1],[635,145,0,0,0,1],[645,145,0,0,0,1],[655,145,0,0,0,1],[665,145,0,0,0,1],[695,145,0,0,0,1],[705,145,0,0,0,1],[715,145,0,0,0,1],[725,145,0,0,0,1],[735,145,0,0,0,1],[745,145,0,0,0,1],[755,145,0,0,0,1],[765,145,0,0,0,1],[775,145,0,0,0,1],[785,145,0,0,0,1],[815,145,0,0,0,1],[825,145,0,0,0,1],[835,145,0,0,0,1],[845,145,0,0,0,1],[865,145,0,0,0,1],[875,145,0,0,0,1],[885,145,0,0,0,1],[895,145,0,0,0,1],[905,145,0,0,0,1],[915,145,0,0,0,1],[925,145,0,0,0,1],[935,145,0,0,0,1],[945,145,0,0,0,1],[955,145,0,0,0,1],[1005,145,0,0,0,1],[1015,145,0,0,0,1],[1025,145,0,0,0,1],[1035,145,0,0,0,1],[1095,145,0,0,0,1],[1105,145,0,0,0,1],[1115,145,0,0,0,1],[1125,145,0,0,0,1],[25,155,0,0,0,1],[35,155,0,0,0,1],[45,155,0,0,0,1],[75,155,0,0,0,1],[85,155,0,0,0,1],[95,155,0,0,0,1],[105,155,0,0,0,1],[115,155,0,0,0,1],[145,155,0,0,0,1],[155,155,0,0,0,1],[165,155,0,0,0,1],[185,155,0,0,0,1],[195,155,0,0,0,1],[205,155,0,0,0,1],[215,155,0,0,0,1],[255,155,0,0,0,1],[265,155,0,0,0,1],[275,155,0,0,0,1],[285,155,0,0,0,1],[325,155,204,0,0,1],[335,155,204,0,0,1],[345,155,204,0,0,1],[355,155,204,0,0,1],[365,155,204,0,0,1],[375,155,204,0,0,1],[385,155,204,0,0,1],[395,155,204,0,0,1],[405,155,204,0,0,1],[415,155,204,0,0,1],[425,155,204,0,0,1],[435,155,204,0,0,1],[445,155,204,0,0,1],[455,155,204,0,0,1],[465,155,204,0,0,1],[515,155,0,0,0,1],[525,155,0,0,0,1],[535,155,0,0,0,1],[575,155,0,0,0,1],[585,155,0,0,0,1],[595,155,0,0,0,1],[605,155,0,0,0,1],[635,155,0,0,0,1],[645,155,0,0,0,1],[655,155,0,0,0,1],[665,155,0,0,0,1],[695,155,0,0,0,1],[705,155,0,0,0,1],[715,155,0,0,0,1],[725,155,0,0,0,1],[755,155,0,0,0,1],[765,155,0,0,0,1],[775,155,0,0,0,1],[785,155,0,0,0,1],[815,155,0,0,0,1],[825,155,0,0,0,1],[835,155,0,0,0,1],[845,155,0,0,0,1],[895,155,0,0,0,1],[905,155,0,0,0,1],[915,155,0,0,0,1],[925,155,0,0,0,1],[995,155,0,0,0,1],[1005,155,0,0,0,1],[1015,155,0,0,0,1],[1025,155,0,0,0,1],[1035,155,0,0,0,1],[1045,155,0,0,0,1],[1095,155,0,0,0,1],[1105,155,0,0,0,1],[1115,155,0,0,0,1],[1125,155,0,0,0,1],[25,165,0,0,0,1],[35,165,0,0,0,1],[45,165,0,0,0,1],[55,165,0,0,0,1],[75,165,0,0,0,1],[85,165,0,0,0,1],[95,165,0,0,0,1],[105,165,0,0,0,1],[115,165,0,0,0,1],[135,165,0,0,0,1],[145,165,0,0,0,1],[155,165,0,0,0,1],[165,165,0,0,0,1],[185,165,0,0,0,1],[195,165,0,0,0,1],[205,165,0,0,0,1],[215,165,0,0,0,1],[265,165,0,0,0,1],[275,165,0,0,0,1],[285,165,0,0,0,1],[325,165,204,0,0,1],[335,165,204,0,0,1],[345,165,204,0,0,1],[355,165,204,0,0,1],[365,165,204,0,0,1],[375,165,204,0,0,1],[385,165,204,0,0,1],[395,165,204,0,0,1],[405,165,204,0,0,1],[415,165,204,0,0,1],[425,165,204,0,0,1],[435,165,204,0,0,1],[445,165,204,0,0,1],[455,165,204,0,0,1],[465,165,204,0,0,1],[515,165,0,0,0,1],[525,165,0,0,0,1],[535,165,0,0,0,1],[585,165,0,0,0,1],[595,165,0,0,0,1],[605,165,0,0,0,1],[615,165,0,0,0,1],[635,165,0,0,0,1],[645,165,0,0,0,1],[655,165,0,0,0,1],[665,165,0,0,0,1],[695,165,0,0,0,1],[705,165,0,0,0,1],[715,165,0,0,0,1],[815,165,0,0,0,1],[825,165,0,0,0,1],[835,165,0,0,0,1],[845,165,0,0,0,1],[895,165,0,0,0,1],[905,165,0,0,0,1],[915,165,0,0,0,1],[925,165,0,0,0,1],[995,165,0,0,0,1],[1005,165,0,0,0,1],[1015,165,0,0,0,1],[1025,165,0,0,0,1],[1035,165,0,0,0,1],[1045,165,0,0,0,1],[1095,165,0,0,0,1],[1105,165,0,0,0,1],[1115,165,0,0,0,1],[1125,165,0,0,0,1],[25,175,0,0,0,1],[35,175,0,0,0,1],[45,175,0,0,0,1],[55,175,0,0,0,1],[65,175,0,0,0,1],[75,175,0,0,0,1],[85,175,0,0,0,1],[95,175,0,0,0,1],[105,175,0,0,0,1],[115,175,0,0,0,1],[125,175,0,0,0,1],[135,175,0,0,0,1],[145,175,0,0,0,1],[155,175,0,0,0,1],[165,175,0,0,0,1],[185,175,0,0,0,1],[195,175,0,0,0,1],[205,175,0,0,0,1],[215,175,0,0,0,1],[225,175,0,0,0,1],[235,175,0,0,0,1],[245,175,0,0,0,1],[255,175,0,0,0,1],[265,175,0,0,0,1],[275,175,0,0,0,1],[285,175,0,0,0,1],[325,175,204,0,0,1],[335,175,204,0,0,1],[345,175,204,0,0,1],[355,175,204,0,0,1],[365,175,204,0,0,1],[375,175,204,0,0,1],[385,175,204,0,0,1],[395,175,204,0,0,1],[405,175,204,0,0,1],[415,175,204,0,0,1],[425,175,204,0,0,1],[435,175,204,0,0,1],[445,175,204,0,0,1],[455,175,204,0,0,1],[465,175,204,0,0,1],[515,175,0,0,0,1],[525,175,0,0,0,1],[535,175,0,0,0,1],[585,175,0,0,0,1],[595,175,0,0,0,1],[605,175,0,0,0,1],[615,175,0,0,0,1],[635,175,0,0,0,1],[645,175,0,0,0,1],[655,175,0,0,0,1],[665,175,0,0,0,1],[685,175,0,0,0,1],[695,175,0,0,0,1],[705,175,0,0,0,1],[715,175,0,0,0,1],[815,175,0,0,0,1],[825,175,0,0,0,1],[835,175,0,0,0,1],[845,175,0,0,0,1],[895,175,0,0,0,1],[905,175,0,0,0,1],[915,175,0,0,0,1],[925,175,0,0,0,1],[985,175,0,0,0,1],[995,175,0,0,0,1],[1005,175,0,0,0,1],[1015,175,0,0,0,1],[1025,175,0,0,0,1],[1035,175,0,0,0,1],[1045,175,0,0,0,1],[1055,175,0,0,0,1],[1095,175,0,0,0,1],[1105,175,0,0,0,1],[1115,175,0,0,0,1],[1125,175,0,0,0,1],[35,185,0,0,0,1],[45,185,0,0,0,1],[55,185,0,0,0,1],[65,185,0,0,0,1],[75,185,0,0,0,1],[85,185,0,0,0,1],[105,185,0,0,0,1],[115,185,0,0,0,1],[125,185,0,0,0,1],[135,185,0,0,0,1],[145,185,0,0,0,1],[155,185,0,0,0,1],[185,185,0,0,0,1],[195,185,0,0,0,1],[205,185,0,0,0,1],[215,185,0,0,0,1],[225,185,0,0,0,1],[235,185,0,0,0,1],[245,185,0,0,0,1],[255,185,0,0,0,1],[265,185,0,0,0,1],[275,185,0,0,0,1],[285,185,0,0,0,1],[325,185,204,0,0,1],[335,185,204,0,0,1],[345,185,204,0,0,1],[355,185,204,0,0,1],[365,185,204,0,0,1],[375,185,204,0,0,1],[385,185,204,0,0,1],[395,185,204,0,0,1],[405,185,204,0,0,1],[415,185,204,0,0,1],[425,185,204,0,0,1],[435,185,204,0,0,1],[445,185,204,0,0,1],[455,185,204,0,0,1],[465,185,204,0,0,1],[515,185,0,0,0,1],[525,185,0,0,0,1],[535,185,0,0,0,1],[585,185,0,0,0,1],[595,185,0,0,0,1],[605,185,0,0,0,1],[615,185,0,0,0,1],[635,185,0,0,0,1],[645,185,0,0,0,1],[655,185,0,0,0,1],[665,185,0,0,0,1],[685,185,0,0,0,1],[695,185,0,0,0,1],[705,185,0,0,0,1],[715,185,0,0,0,1],[755,185,0,0,0,1],[765,185,0,0,0,1],[775,185,0,0,0,1],[785,185,0,0,0,1],[815,185,0,0,0,1],[825,185,0,0,0,1],[835,185,0,0,0,1],[845,185,0,0,0,1],[895,185,0,0,0,1],[905,185,0,0,0,1],[915,185,0,0,0,1],[925,185,0,0,0,1],[985,185,0,0,0,1],[995,185,0,0,0,1],[1005,185,0,0,0,1],[1035,185,0,0,0,1],[1045,185,0,0,0,1],[1055,185,0,0,0,1],[1095,185,0,0,0,1],[1105,185,0,0,0,1],[1115,185,0,0,0,1],[1125,185,0,0,0,1],[35,195,0,0,0,1],[45,195,0,0,0,1],[55,195,0,0,0,1],[65,195,0,0,0,1],[75,195,0,0,0,1],[85,195,0,0,0,1],[105,195,0,0,0,1],[115,195,0,0,0,1],[125,195,0,0,0,1],[135,195,0,0,0,1],[145,195,0,0,0,1],[155,195,0,0,0,1],[185,195,0,0,0,1],[195,195,0,0,0,1],[205,195,0,0,0,1],[215,195,0,0,0,1],[335,195,204,0,0,1],[345,195,204,0,0,1],[355,195,204,0,0,1],[365,195,204,0,0,1],[375,195,204,0,0,1],[385,195,204,0,0,1],[395,195,204,0,0,1],[405,195,204,0,0,1],[415,195,204,0,0,1],[425,195,204,0,0,1],[435,195,204,0,0,1],[445,195,204,0,0,1],[455,195,204,0,0,1],[515,195,0,0,0,1],[525,195,0,0,0,1],[535,195,0,0,0,1],[585,195,0,0,0,1],[595,195,0,0,0,1],[605,195,0,0,0,1],[615,195,0,0,0,1],[635,195,0,0,0,1],[645,195,0,0,0,1],[655,195,0,0,0,1],[665,195,0,0,0,1],[685,195,0,0,0,1],[695,195,0,0,0,1],[705,195,0,0,0,1],[715,195,0,0,0,1],[755,195,0,0,0,1],[765,195,0,0,0,1],[775,195,0,0,0,1],[785,195,0,0,0,1],[815,195,0,0,0,1],[825,195,0,0,0,1],[835,195,0,0,0,1],[845,195,0,0,0,1],[895,195,0,0,0,1],[905,195,0,0,0,1],[915,195,0,0,0,1],[925,195,0,0,0,1],[985,195,0,0,0,1],[995,195,0,0,0,1],[1005,195,0,0,0,1],[1035,195,0,0,0,1],[1045,195,0,0,0,1],[1055,195,0,0,0,1],[1095,195,0,0,0,1],[1105,195,0,0,0,1],[1115,195,0,0,0,1],[1125,195,0,0,0,1],[35,205,0,0,0,1],[45,205,0,0,0,1],[55,205,0,0,0,1],[65,205,0,0,0,1],[75,205,0,0,0,1],[85,205,0,0,0,1],[105,205,0,0,0,1],[115,205,0,0,0,1],[125,205,0,0,0,1],[135,205,0,0,0,1],[145,205,0,0,0,1],[155,205,0,0,0,1],[185,205,0,0,0,1],[195,205,0,0,0,1],[205,205,0,0,0,1],[215,205,0,0,0,1],[255,205,0,0,0,1],[265,205,0,0,0,1],[275,205,0,0,0,1],[285,205,0,0,0,1],[345,205,204,0,0,1],[355,205,204,0,0,1],[365,205,204,0,0,1],[375,205,204,0,0,1],[385,205,204,0,0,1],[395,205,204,0,0,1],[405,205,204,0,0,1],[415,205,204,0,0,1],[425,205,204,0,0,1],[435,205,204,0,0,1],[445,205,204,0,0,1],[515,205,0,0,0,1],[525,205,0,0,0,1],[535,205,0,0,0,1],[575,205,0,0,0,1],[585,205,0,0,0,1],[595,205,0,0,0,1],[605,205,0,0,0,1],[615,205,0,0,0,1],[635,205,0,0,0,1],[645,205,0,0,0,1],[655,205,0,0,0,1],[665,205,0,0,0,1],[695,205,0,0,0,1],[705,205,0,0,0,1],[715,205,0,0,0,1],[725,205,0,0,0,1],[765,205,0,0,0,1],[775,205,0,0,0,1],[785,205,0,0,0,1],[815,205,0,0,0,1],[825,205,0,0,0,1],[835,205,0,0,0,1],[845,205,0,0,0,1],[895,205,0,0,0,1],[905,205,0,0,0,1],[915,205,0,0,0,1],[925,205,0,0,0,1],[975,205,0,0,0,1],[985,205,0,0,0,1],[995,205,0,0,0,1],[1005,205,0,0,0,1],[1015,205,0,0,0,1],[1025,205,0,0,0,1],[1035,205,0,0,0,1],[1045,205,0,0,0,1],[1055,205,0,0,0,1],[1065,205,0,0,0,1],[1095,205,0,0,0,1],[1105,205,0,0,0,1],[1115,205,0,0,0,1],[1125,205,0,0,0,1],[45,215,0,0,0,1],[55,215,0,0,0,1],[65,215,0,0,0,1],[75,215,0,0,0,1],[115,215,0,0,0,1],[125,215,0,0,0,1],[135,215,0,0,0,1],[145,215,0,0,0,1],[195,215,0,0,0,1],[205,215,0,0,0,1],[215,215,0,0,0,1],[225,215,0,0,0,1],[235,215,0,0,0,1],[245,215,0,0,0,1],[255,215,0,0,0,1],[265,215,0,0,0,1],[275,215,0,0,0,1],[285,215,0,0,0,1],[355,215,204,0,0,1],[365,215,204,0,0,1],[375,215,204,0,0,1],[385,215,204,0,0,1],[395,215,204,0,0,1],[405,215,204,0,0,1],[415,215,204,0,0,1],[425,215,204,0,0,1],[435,215,204,0,0,1],[515,215,0,0,0,1],[525,215,0,0,0,1],[535,215,0,0,0,1],[545,215,0,0,0,1],[555,215,0,0,0,1],[565,215,0,0,0,1],[575,215,0,0,0,1],[585,215,0,0,0,1],[595,215,0,0,0,1],[605,215,0,0,0,1],[635,215,0,0,0,1],[645,215,0,0,0,1],[655,215,0,0,0,1],[665,215,0,0,0,1],[695,215,0,0,0,1],[705,215,0,0,0,1],[715,215,0,0,0,1],[725,215,0,0,0,1],[735,215,0,0,0,1],[745,215,0,0,0,1],[755,215,0,0,0,1],[765,215,0,0,0,1],[775,215,0,0,0,1],[785,215,0,0,0,1],[815,215,0,0,0,1],[825,215,0,0,0,1],[835,215,0,0,0,1],[845,215,0,0,0,1],[895,215,0,0,0,1],[905,215,0,0,0,1],[915,215,0,0,0,1],[925,215,0,0,0,1],[975,215,0,0,0,1],[985,215,0,0,0,1],[995,215,0,0,0,1],[1005,215,0,0,0,1],[1015,215,0,0,0,1],[1025,215,0,0,0,1],[1035,215,0,0,0,1],[1045,215,0,0,0,1],[1055,215,0,0,0,1],[1065,215,0,0,0,1],[1095,215,0,0,0,1],[1105,215,0,0,0,1],[1115,215,0,0,0,1],[1125,215,0,0,0,1],[1135,215,0,0,0,1],[1145,215,0,0,0,1],[1155,215,0,0,0,1],[1165,215,0,0,0,1],[1175,215,0,0,0,1],[45,225,0,0,0,1],[55,225,0,0,0,1],[65,225,0,0,0,1],[75,225,0,0,0,1],[115,225,0,0,0,1],[125,225,0,0,0,1],[135,225,0,0,0,1],[145,225,0,0,0,1],[195,225,0,0,0,1],[205,225,0,0,0,1],[215,225,0,0,0,1],[225,225,0,0,0,1],[235,225,0,0,0,1],[245,225,0,0,0,1],[255,225,0,0,0,1],[265,225,0,0,0,1],[275,225,0,0,0,1],[365,225,204,0,0,1],[375,225,204,0,0,1],[385,225,204,0,0,1],[395,225,204,0,0,1],[405,225,204,0,0,1],[415,225,204,0,0,1],[425,225,204,0,0,1],[515,225,0,0,0,1],[525,225,0,0,0,1],[535,225,0,0,0,1],[545,225,0,0,0,1],[555,225,0,0,0,1],[565,225,0,0,0,1],[575,225,0,0,0,1],[585,225,0,0,0,1],[595,225,0,0,0,1],[635,225,0,0,0,1],[645,225,0,0,0,1],[655,225,0,0,0,1],[665,225,0,0,0,1],[705,225,0,0,0,1],[715,225,0,0,0,1],[725,225,0,0,0,1],[735,225,0,0,0,1],[745,225,0,0,0,1],[755,225,0,0,0,1],[765,225,0,0,0,1],[775,225,0,0,0,1],[785,225,0,0,0,1],[815,225,0,0,0,1],[825,225,0,0,0,1],[835,225,0,0,0,1],[845,225,0,0,0,1],[895,225,0,0,0,1],[905,225,0,0,0,1],[915,225,0,0,0,1],[925,225,0,0,0,1],[965,225,0,0,0,1],[975,225,0,0,0,1],[985,225,0,0,0,1],[995,225,0,0,0,1],[1045,225,0,0,0,1],[1055,225,0,0,0,1],[1065,225,0,0,0,1],[1075,225,0,0,0,1],[1095,225,0,0,0,1],[1105,225,0,0,0,1],[1115,225,0,0,0,1],[1125,225,0,0,0,1],[1135,225,0,0,0,1],[1145,225,0,0,0,1],[1155,225,0,0,0,1],[1165,225,0,0,0,1],[1175,225,0,0,0,1],[45,235,0,0,0,1],[55,235,0,0,0,1],[65,235,0,0,0,1],[75,235,0,0,0,1],[115,235,0,0,0,1],[125,235,0,0,0,1],[135,235,0,0,0,1],[145,235,0,0,0,1],[215,235,0,0,0,1],[225,235,0,0,0,1],[235,235,0,0,0,1],[245,235,0,0,0,1],[255,235,0,0,0,1],[265,235,0,0,0,1],[375,235,204,0,0,1],[385,235,204,0,0,1],[395,235,204,0,0,1],[405,235,204,0,0,1],[415,235,204,0,0,1],[515,235,0,0,0,1],[525,235,0,0,0,1],[535,235,0,0,0,1],[545,235,0,0,0,1],[555,235,0,0,0,1],[565,235,0,0,0,1],[575,235,0,0,0,1],[585,235,0,0,0,1],[635,235,0,0,0,1],[645,235,0,0,0,1],[655,235,0,0,0,1],[665,235,0,0,0,1],[715,235,0,0,0,1],[725,235,0,0,0,1],[735,235,0,0,0,1],[745,235,0,0,0,1],[755,235,0,0,0,1],[775,235,0,0,0,1],[785,235,0,0,0,1],[815,235,0,0,0,1],[825,235,0,0,0,1],[835,235,0,0,0,1],[845,235,0,0,0,1],[895,235,0,0,0,1],[905,235,0,0,0,1],[915,235,0,0,0,1],[925,235,0,0,0,1],[965,235,0,0,0,1],[975,235,0,0,0,1],[985,235,0,0,0,1],[995,235,0,0,0,1],[1045,235,0,0,0,1],[1055,235,0,0,0,1],[1065,235,0,0,0,1],[1075,235,0,0,0,1],[1095,235,0,0,0,1],[1105,235,0,0,0,1],[1115,235,0,0,0,1],[1125,235,0,0,0,1],[1135,235,0,0,0,1],[1145,235,0,0,0,1],[1155,235,0,0,0,1],[1165,235,0,0,0,1],[1175,235,0,0,0,1],[385,245,204,0,0,1],[395,245,204,0,0,1],[405,245,204,0,0,1],[395,255,204,0,0,1]];
	var spots = new Array();		// Spots Array (original_position_x, original_position_y, static_position_x, static_position_y, current_position_x, current_position_y, speed_x, speed_y, fillStyle)
	var mouse_radius = 100;
	var spot_radius = 5;
	var spot_gap = 0;
	var spot_size = spot_radius*2 + spot_gap;
	var spot_array_size = 100;		// Array Size will be changed if image load successfully
	var spot_row_offset = 0;
	if(spot_row_offset < 0)
	{
		spot_row_offset += spot_size;
	}
	spot_row_offset = spot_row_offset%spot_size;
	var img = new Image();
	img.src = 'images/love-sydney-digital-agency-company.png';


	var start_time = new Date();
	var end_time = new Date();
	var time_difference = 0;
	var start_time_2 = new Date();
	var end_time_2 = new Date();
	var time_difference_2 = 0;
	var start_page_coords = Array(0,0);
	var page_coords = Array(0,0);
	var speed = 0;
	var speed_steps = 10;
	var speed_constant_hit = 0.5;
	var speed_constant_gravity = 0.005;
	var speed_constant_friction = 0.9;
	var previous_speed = new Array();
	var speed_count = 0;
	var average_speed = 0;
	var display = "";

	spot_array_size = spots_init.length;

	for(i=0;i<spot_array_size;i++)
	{
        spots[i] = new Array(spots_init[i][0], spots_init[i][1], spots_init[i][0], spots_init[i][1], Math.random()*canvas_width*0.9 + canvas_width*0.05, Math.random()*canvas_height*0.9 + canvas_height*0.05, 0, 0, 'rgba('+spots_init[i][2]+','+spots_init[i][3]+','+spots_init[i][4]+','+spots_init[i][5]+')');
	}
	
	window.requestAnimFrame = (function(callback) {
		return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame ||
		function(callback) {
			window.setTimeout(callback, 1000 / 60);
		};
	})();
	function draw_canvas()
	{
		end_time = new Date();
		time_difference = end_time - start_time;
		start_time = end_time;
		
		ctx.clearRect(0, 0, canvas_width, canvas_height);
		ctx.font = "bold "+spot_radius*4+"px Arial";
		for(i=0;i<spot_array_size;i++)
		{
			// Change Current Position according to velocity (speed)
			if(((spots[i][4]-spots[i][2])*(spots[i][4]-spots[i][2]) + (spots[i][5]-spots[i][3])*(spots[i][5]-spots[i][2])) < 1 && (spots[i][6]*spots[i][6] + spots[i][7]*spots[i][7]) < 0.1 )
			{
				spots[i][4] = spots[i][2];
				spots[i][5] = spots[i][3];
				spots[i][6] = 0;
				spots[i][7] = 0;				
			}
			else
			{				
				spots[i][4] = spots[i][4] + spots[i][6];			
				spots[i][5] = spots[i][5] + spots[i][7];
			}

			// Fix spot to static statue if error happens
			if(isNaN(spots[i][4]))
			{
				spots[i][4] = canvas_width*(Math.round(Math.random()));
				spots[i][6] = 0;
			}
			if(isNaN(spots[i][5]))
			{
				spots[i][5] = canvas_height*(Math.round(Math.random()));
				spots[i][7] = 0;				
			}

			// Change Speed if spot inside cursor circle
			k = Math.sqrt(((spots[i][4]-page_coords[0])*(spots[i][4]-page_coords[0]) + (spots[i][5]-page_coords[1])*(spots[i][5]-page_coords[1])) / ((mouse_radius+spot_radius)*(mouse_radius+spot_radius)));
			if( k < 1 ) // Hit Happens for Spot i
			{
				// Set Speed
				spots[i][6] = spots[i][6] + speed_constant_hit*(1-k)/k * (spots[i][4] - page_coords[0]);
				spots[i][7] = spots[i][7] + speed_constant_hit*(1-k)/k * (spots[i][5] - page_coords[1]);
				
			}
				
			// Change Speed according to current position
			spots[i][6] += speed_constant_gravity*(spots[i][2]-spots[i][4]);
			spots[i][7] += speed_constant_gravity*(spots[i][3]-spots[i][5]);

			// Change Speed according to ground friction
			if(spots[i][6]*spots[i][6] + spots[i][7]*spots[i][7] > 0.01)
			{
				spots[i][6] *= speed_constant_friction;
				spots[i][7] *= speed_constant_friction;
			}
			
			
			// Draw spot
			ctx.beginPath();
			ctx.fillStyle = spots[i][8];
			ctx.fillText("+",spots[i][4],spots[i][5]);
			//ctx.arc(spots[i][4],spots[i][5],spot_radius,0,2*Math.PI);			
			ctx.fill();
		}
		/*ctx.beginPath();
		ctx.arc(page_coords[0],page_coords[1],mouse_radius,0,2*Math.PI);
		ctx.stroke();*/
		
		
		
		requestAnimFrame(function() {
			draw_canvas();
		});
	}
	
	draw_canvas();		
	
	$(".canvas_container").mousemove(function(event) {
		page_coords = Array(event.pageX - $("#body_canvas").offset().left, event.pageY - $("#body_canvas").offset().top);
		client_coords = Array(event.clientX, event.clientY);
		end_time_2 = new Date();
		time_difference_2 = end_time_2 - start_time_2;
		distance_difference = Math.sqrt((page_coords[0]-start_page_coords[0])*(page_coords[0]-start_page_coords[0]) + (page_coords[1]-start_page_coords[1])*(page_coords[1]-start_page_coords[1]));
		speed = distance_difference / time_difference_2;
		if(!isNaN(speed))
		{			
			start_time_2 = end_time_2;
			start_page_coords = page_coords;
			
			speed_count++;
			if(speed_count >= speed_steps)
			{
				speed_count -= speed_steps;
			}
			
			previous_speed[speed_count] = speed;
			
			average_speed = 0;
			for(i=0;i<speed_steps;i++)
			{
				average_speed += previous_speed[i];
			}
			average_speed = average_speed / speed_steps;
			
			// Check Spot Hit
			for(i=0;i<spot_array_size;i++)
			{
				/*k = Math.sqrt(((spots[i][4]-page_coords[0])*(spots[i][4]-page_coords[0]) + (spots[i][5]-page_coords[1])*(spots[i][5]-page_coords[1])) / ((mouse_radius+spot_radius)*(mouse_radius+spot_radius)));
				if( k < 1 ) // Hit Happens for Spot i
				{
					// Set Speed
					spots[i][6] = spots[i][6] + (1-k)/k * (spots[i][4] - page_coords[0]);
					spots[i][7] = spots[i][7] + (1-k)/k * (spots[i][5] - page_coords[1]);
					
				}*/
				
				k1 = Math.sqrt(((spots[i][0]-page_coords[0])*(spots[i][0]-page_coords[0]) + (spots[i][1]-page_coords[1])*(spots[i][1]-page_coords[1])) / ((mouse_radius+spot_radius)*(mouse_radius+spot_radius)));
				if( k1 < 1 ) // Change Static Position
				{
					// Set Static Position
					spots[i][2] = (spots[i][0] - page_coords[0])/k1 + page_coords[0];
					spots[i][3] = (spots[i][1] - page_coords[1])/k1 + page_coords[1];
					
				}
				else
				{
					spots[i][2] = spots[i][0];
					spots[i][3] = spots[i][1];
				}
			}
		}
		else
		{
			javascript: console.log(Array(time_difference_2, distance_difference, speed));
		}
			
		//$('#body_info_display').html('Page: '+page_coords+'<br>Client: '+client_coords+'<br>Speed: '+speed+'<br>Average Speed: '+average_speed+' '+(Math.log(average_speed)/Math.LN10+3)+'<br>Spot Position: '+spots+'<br>Spot Distance: '+Math.sqrt((spots[0][0]-page_coords[0])*(spots[0][0]-page_coords[0]) + (spots[0][1]-page_coords[1])*(spots[0][1]-page_coords[1]))+'');
	});
});
